openapi: 3.0.0
info:
  title: Flask SQLAlchemy RESTful API
  version: 1.0.0
  description: |-
    產生的 OpenAPI 文件，對應 Flask + SQLAlchemy 所有 RESTful API。
    
    - 所有 API 回傳 JSON。

servers:
  - url: http://127.0.0.1:8000
    description: Development server

components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: session
      
  schemas:
    # 200: an array of Nominatim-style result items
    GeocodeResults:
      type: array
      items:
        $ref: "#/components/schemas/GeocodeResult"
    GeocodeResult:
      type: object
      additionalProperties: true
      properties:
        place_id:
          oneOf:
            - type: integer
            - type: string
        lat:
          type: string
          description: Latitude as string per Nominatim default.
        lon:
          type: string
          description: Longitude as string per Nominatim default.
        display_name:
          type: string
        class:
          type: string
        type:
          type: string
        importance:
          type: number
        boundingbox:
          type: array
          items:
            type: string
          description: N, S, E, W as strings.
        address:
          type: object
          additionalProperties: true
          description: Nominatim-formatted address object.
    ErrorResponse:
      type: object
      required: [error]
      properties:
        error:
            type: string
    NotFoundResponse:
      type: object
      required: [message, results]
      properties:
        message:
          type: string
          description: Human-readable not-found message (Chinese).
        results:
          type: array
          description: Always an empty array in this case.
          items: {}
    UpstreamErrorResponse:
      type: object
      required: [error]
      properties:
        error:
          type: string
          description: Generic error message.
        status:
          type: integer
          description: HTTP status returned by the upstream (if available).
        body:
          type: string
          description: Truncated upstream response body (for diagnostics).
        detail:
          type: string
          description: Local exception detail (e.g., connection error).
    # 基本回應模型
    Message:
      type: object
      properties:
        message:
          type: string
          example: "操作成功"

    Error:
      type: object
      properties:
        error:
          type: string
          example: "錯誤訊息"

    ChatSessionTitle:
      type: object
      required:
        - title
      properties:
        title:
          type: string
          example: "A chat about 5G-ORAN"

    ChatMessage:
      type: object
      required:
        - role
        - content
        - time
      properties:
        role:
          type: string
          enum:
            - USER
            - ASSISTANT
          example: USER
        content:
          type: string
          example: How many UEs are connected to gNB2?
        time:
          type: string
          format: date-time
          example: 2025-08-14T15:30:00Z

    # 用戶相關
    User:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
        account:
          type: string
          example: user1
        email:
          type: string
          example: user1@gmail.com
        role:
          type: string
          enum: [ADMIN, USER]
          example: USER
        grafana_user_id:
          type: string
          example: 12345
          nullable: true
        created_at:
          type: string
          format: date
          example: '2023-10-01'

    User_put_body:
      type: object
      properties:
        account:
          type: string
          example: user1
        email:
          type: string
          example: user1@gmail.com
        role:
          type: string
          enum: [ADMIN, USER]
          example: USER
        password:
          type: string
          example: password123

    RegisterRequest:
      type: object
      required:
        - account
        - password
        - email
      properties:
        account:
          type: string
          example: user123
        password:
          type: string
          example: password123
        email:
          type: string
          format: email
          example: user@example.com

    LoginRequest:
      type: object
      required:
        - account
        - password
      properties:
        account:
          type: string
          example: user123
        password:
          type: string
          example: password123

    # 專案相關
    Project:
      type: object
      properties:
        project_id:
          type: integer
          example: 1
        title:
          type: string
          example: Project A
        date:
          type: string
          format: date
          example: '2023-10-01'
        grafana_folder_id:
          type: string
          example: "folder123"
          nullable: true
        lat:
          type: double
          example: 22.99414508942207
        lon: 
          type : double
          example: 120.21676580777418
        margin:
          type: integer
          example : 200
        lat_offset:
          type: float
          example: 10.0
        lon_offset:
          type: float
          example: 10.0
        rotation_offset:
          type: float
          example: 10.0
        scale:
          type: float
          example: 10.0
        owner:
          $ref: '#/components/schemas/User'
        is_deployed:
          type: boolean
          example: False

    ProjectPostRequest:
      type: object
      required:
        - title
        - date
      properties:
        title:
          type: string
          example: Project A
        date:
          type: string
          format: date
          example: '2023-10-01'
        gml_file:
          in: formData
          type: string
          format: binary
        lat:
          type: number
          example: 22.82539
        lon:
          type: number
          example: 120.40568
        margin:
          type: number
          example: 200

    ProjectPutRequest:
      type: object
      properties:
        title:
          type: string
          example: Project A
        date:
          type: string
          format: date
          example: '2023-10-01'
        lat:
          type: number
          example: 22.82539
        lon:
          type: number
          example: 120.40568
        margin:
          type: number
          example: 200

    ProjectStatus:
      type: object
      properties:
        rsrp_status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: SUCCESS
          nullable: true
        throughput_status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: SUCCESS
          nullable: true
        rsrp_dt_status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: SUCCESS
          nullable: true
        throughput_dt_status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: SUCCESS
          nullable: true

    ProjectStatusUpdateRequest:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: SUCCESS

    Project_heatmap_Data:
      type: object
      properties:
        areaId:
          type: integer
          description: 區域 ID
          example: 1
        ms_x:
          type: number
          format: float
          description: MS X 座標
          example: -7.77217
        ms_y:
          type: number
          format: float
          description: MS Y 座標
        rus:
          type: array
          description: RSRP 數值
          items:
            type: number
            format: float
          example: [ -92.06, -120.40, -250 ]
      required:
        - areaId
        - ms_x
        - ms_y
        - rus

    ProjectRSRPRequest:
      type: array
      items:
        $ref: '#/components/schemas/Project_heatmap_Data'

    ProjectRSRPDTRequest:
      type: array
      items:
        $ref: '#/components/schemas/Project_heatmap_Data'

    ProjectThroughputRequest:
      type: array
      items:
        $ref: '#/components/schemas/Project_heatmap_Data'

    ProjectThroughputDTRequest:
      type: array
      items:
        $ref: '#/components/schemas/Project_heatmap_Data'

    MapCorrectionRequest:
      type: object
      properties:
        rotation_offset: 
          type: number
          format: double
          description: 地圖旋轉角度（以東方為 0 度，逆時針）
          example: 0.0
        lat_offset:
          type: number
          format: double
          description: 中心緯度位移量
          example: 0.0
        lon_offset:
          type: number
          format: double
          description: 中心經度位移量
          example: 0.0
        scale:
          type: number
          format: double
          description: 地圖縮放倍數
          example: 1.0


    # 品牌相關
    BrandMetrics:
      type: object
      properties:
        id:
          type: integer
          example: 1
        brand_id:
          type: integer
          example: 1
        name:
          type: string
          description: "參數名稱"
          example: "DL throughput per cell"
        type:
          type: string
          description: "參數類型 (Report / Control)"
          example: "Report"
        unit:
          type: string
          description: "單位 (dBm, Mbps...)"
          example: "Mbps"
          nullable: true
        interval:
          type: integer
          description: "回報間隔秒數"
          example: 5
          nullable: true
        api_source:
          type: string
          description: "API 來源 (OSS-uelist / Netopeer-stream 等)"
          example: "OSS-uelist"
          nullable: true
        operator:
          type: string
          description: "operator 欄位"
          example: "="
          nullable: true
        description:
          type: string
          description: "描述"
          example: "每個小區的下行吞吐量"
          nullable: true
        abstract_metrics_id:
          type: integer
          description: "對應 AbstractMetrics 的 id"
          example: 1
      required:
        - name
        - type
        - brand_id
        - abstract_metrics_id

    BrandMetricsRequest:
      type: object
      properties:
        abstract_metrics_id:
          type: integer
          description: "對應 AbstractMetrics 的 id"
          example: 1
        name:
          type: string
          description: "參數名稱"
          example: "DL throughput per cell"
        type:
          type: string
          description: "參數類型 (Report / Control)"
          example: "Report"
        unit:
          type: string
          description: "單位 (dBm, Mbps...)"
          example: "Mbps"
          nullable: true
        interval:
          type: integer
          description: "回報間隔秒數"
          example: 5
          nullable: true
        api_source:
          type: string
          description: "API 來源 (OSS-uelist / Netopeer-stream 等)"
          example: "OSS-uelist"
          nullable: true
        operator:
          type: string
          description: "operator 欄位"
          example: "="
          nullable: true
        description:
          type: string
          description: "描述"
          example: "每個小區的下行吞吐量"
          nullable: true
      required:
        - name
        - type

    Brand:
      type: object
      properties:
        brand_id:
          type: integer
          example: 1
        brand_name:
          type: string
          example: Pegatron
        bandwidth:
          type: number
          example: 20.0
        tx_power:
          type: number
          example: 10.0
        brand_metrics:
          type: array
          items:
            $ref: '#/components/schemas/BrandMetrics'

    BrandRequest:
      type: object
      required:
        - brand_name
        - bandwidth
        - tx_power
      properties:
        brand_name:
          type: string
          example: Pegatron
        bandwidth:
          type: number
          example: 20.0
        tx_power:
          type: number
          example: 10.0
        brand_metrics:
          type: array
          items:
            $ref: '#/components/schemas/BrandMetricsRequest'

    BrandRequestPut:
      type: object
      required:
        - bandwidth
        - tx_power
      properties:
        bandwidth:
          type: number
          example: 20.0
        tx_power:
          type: number
          example: 10.0
        brand_metrics:
          type: array
          items:
            $ref: '#/components/schemas/BrandMetricsRequest'

    # 網路設備
    CU:
      type: object
      properties:
        CU_id:
          type: integer
          example: 1
        project_id:
          type: integer
          example: 1
        name:
          type: string
          example: p1_cu1
        brand_id:
          type: integer
          example: 1

    CURequest:
      type: object
      required:
        - project_id
        - name
        - brand_id
      properties:
        project_id:
          type: integer
          example: 1
        name:
          type: string
          example: p1_cu1
        brand_id:
          type: integer
          example: 1

    DU:
      type: object
      properties:
        DU_id:
          type: integer
          example: 1
        CU_id:
          type: integer
          example: 1
          nullable: true
        project_id:
          type: integer
          example: 1
        name:
          type: string
          example: p1_du1
        brand_id:
          type: integer
          example: 1

    DURequest:
      type: object
      required:
        - project_id
        - name
        - brand_id
      properties:
        CU_id:
          type: integer
          example: 1
          nullable: true
        project_id:
          type: integer
          example: 1
        name:
          type: string
          example: p1_du1
        brand_id:
          type: integer
          example: 1

    RU:
      type: object
      properties:
        RU_id:
          type: integer
          example: 1
        DU_id:
          type: integer
          example: 1
          nullable: true
        project_id:
          type: integer
          example: 1
        lat:
          type: number
          example: 1.2
          nullable: true
        lon:
          type: number
          example: 1.2
          nullable: true
        z:
          type: number
          example: 1.2
          nullable: true
        name:
          type: string
          example: p1_ru1
        brand_id:
          type: integer
          example: 1
        bandwidth:
          type: number
          example: 20.0
        tx_power:
          type: number
          example: 10.0
        opening_angle:
          type: number
          example: 60
        roll:
          type: number
          example: 0
        tilt:
          type: number
          example: 0

    RURequest:
      type: object
      required:
        - name
        - project_id
        - brand_id
        - bandwidth
        - tx_power
      properties:
        name:
          type: string
          example: p1_ru1
        DU_id:
          type: integer
          example: 1
          nullable: true
        project_id:
          type: integer
          example: 1
        brand_id:
          type: integer
          example: 1
        lat:
          type: number
          example: 1.2
          nullable: true
        lon:
          type: number
          example: 1.2
          nullable: true
        z:
          type: number
          example: 1.2
          nullable: true
        bandwidth:
          type: number
          example: 20.0
        tx_power:
          type: number
          example: 10.0
        opening_angle:
          type: number
          example: 60
        roll:
          type: number
          example: 0
        tilt:
          type: number
          example: 0

    RULocationRequest:
      type: object
      required:
        - lat
        - lon
        - z
      properties:
        lat:
          type: number
          example: 1.2
        lon:
          type: number
          example: 1.2
        z:
          type: number
          example: 1.2
      example:
        lat: 1.2
        lon: 1.2
        z: 1.2


    #deploy相關
        
    ProjectSetDeploy: 
      type: object
      properties:
        CUs:
          type: array
          items:
            $ref: '#/components/schemas/CU'
        DUs:
          type: array
          items:
            $ref: '#/components/schemas/DU'
        RUs:
          type: array
          items:
            $ref: '#/components/schemas/RU'

    # 快取相關
    RUCache:
      type: object
      properties:
        RU_id:
          type: integer
          example: 1
        name:
          type: string
          example: p1_ru1_cache
        eval_id:
          type: integer
          example: 1
        project_id:
          type: integer
          example: 1
        brand_id:
          type: integer
          example: 1
        lat:
          type: number
          example: 1.2
          nullable: true
        lon:
          type: number
          example: 1.2
          nullable: true
        z:
          type: number
          example: 1.2
          nullable: true
        bandwidth:
          type: number
          example: 20.0
        tx_power:
          type: number
          example: 10.0
        opening_angle:
          type: number
          example: 60
        roll:
          type: number
          example: 0
        tilt:
          type: number
          example: 0

    # 地圖相關
    Map:
      type: object
      properties:
        map_id:
          type: integer
          example: 1
        project_id:
          type: integer
          example: 1
        MinIO_map_for_aodt:
          type: string
          example: map_image
          nullable: true
        MinIO_map_for_frontend:
          type: string
          example: map_position

    MapRequest:
      type: object
      required:
        - project_id
      properties:
        project_id:
          type: integer
          example: 1
        MinIO_map_for_aodt:
          type: string
          example: map_image
          nullable: true
        MinIO_map_for_frontend:
          type: string
          example: map_position

    # status
    Evaluation:
      type: object
      properties:
        eval_id:
          type: integer
          example: 1
        project_id:
          type: integer
          example: 1
        rsrp_status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: IDLE
        throughput_status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: IDLE
        rsrp_dt_status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: IDLE
        throughput_dt_status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: IDLE

    EvaluationRequest:
      type: object
      required:
        - project_id
      properties:
        project_id:
          type: integer
          example: 1
  
    EvaluationStatusUpdateRequest:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum: [IDLE, WAITING, FAILURE, SUCCESS]
          example: SUCCESS

    EvaluationHeatmap:
      type: object
      properties:
        evaluation_id:
          type: integer
          example: 1
        heatmap:
          type: array
          items:
            $ref: '#/components/schemas/Project_heatmap_Data'
        sim_mode:
          type: string
          enum: [rsrp, rsrp_dt, throughput, throughput_dt]
          example: 'rsrp'
      required:
        - evaluation_id
        - heatmap
        - sim_mode

    # AI 模型相關
    AIModel:
      type: object
      properties:
        AI_model_id:
          type: integer
          example: 1
        model_name:
          type: string
          example: "MyModel"
        project_id:
          type: integer
          example: 1
        is_active:
          type: boolean
          example: false
        is_training:
          type: boolean
          example: false
        can_be_updated:
          type: boolean
          example: false

    AIModelRequest:
      type: object
      required:
        - model_name
        - project_id
      properties:
        model_name:
          type: string
          example: "MyModel"
        project_id:
          type: integer
          example: 1

    PrimitiveAIModel:
      type: object
      properties:
        model_id:
          type: integer
          example: 1
        model_name:
          type: string
          example: "PrimitiveAIModel"
        ai_metrics:
          type: array
          items:
            $ref: '#/components/schemas/AIMetrics'

    PrimitiveAIModelRequest:
      type: object
      required:
        - model_name
      properties:
        model_name:
          type: string
          example: "PrimitiveAIModel"
        ai_metrics:
          type: array
          items:
            $ref: '#/components/schemas/AIMetricsRequest'

    AIMetrics:
      type: object
      properties:
        id:
          type: integer
          example: 1
        model_id:
          type: integer
          example: 1
        abstract_metrics_id:
          type: integer
          example: 1
        name:
          type: string
          example: "AI UE Count"
        type:
          type: string
          example: "Report"
        unit:
          type: string
          example: "dBm"
          nullable: true
        interval:
          type: integer
          example: 5
          nullable: true
        operator:
          type: string
          example: "="
          nullable: true
        description:
          type: string
          example: "AI 預測 UE 數量"
          nullable: true
        abstract_metrics:
          $ref: '#/components/schemas/AbstractMetrics'

    AIMetricsRequest:
      type: object
      required:
        - name
        - type
      properties:
        name:
          type: string
        type:
          type: string
        unit:
          type: string
          nullable: true
        interval:
          type: integer
          nullable: true
        operator:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        abstract_metrics_id:
          type: integer
          example: 1

    AbstractMetrics:
      type: object
      properties:
        id:
          type: integer
          example: 1
        key:
          type: string
          example: "cell_on_off"
        display_name:
          type: string
          example: "Cell ON/OFF"

    AbstractMetricsShow:
      type: object
      properties:
        id:
          type: integer
          example: 1
        key:
          type: string
          example: "cell_on_off"
        display_name:
          type: string
          example: "Cell ON/OFF"
        ai_metrics:
          type: array
          items:
            $ref: '#/components/schemas/AIMetrics'
        BrandMetrics:
          type: array
          items:
            $ref: '#/components/schemas/BrandMetrics'

    # 用戶專案關聯
    UserProject:
      type: object
      properties:
        user_id:
          type: integer
          example: 1
        project_id:
          type: integer
          example: 1
        role:
          type: string
          example: "OWNER"

    UserProjectRole:
      type: object
      properties:
        project_id:
          type: integer
          example: 1
        role:
          type: string
          example: "OWNER"

    UserProjectRequest:
      type: object
      required:
        - role
      properties:
        role:
          type: string
          example: "user"
    
    AODTResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "操作成功"
        data:
          type: object
          nullable: true
          description: "回傳的資料"

    AODTStatusResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "AODT 服務運行正常"
        status:
          type: string
          enum: [connected, disconnected, error]
          example: "connected"
        api_url:
          type: string
          example: "http://140.113.144.121:8011"
          nullable: true

    AODTWorkflowResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "AODT 工作流程啟動成功"
        steps_completed:
          type: array
          items:
            type: string
          example: 
            - "資料庫連接成功"
            - "USD Stage 開啟成功"
            - "模擬配置完成"
    
    AODTConnectionRequest:
      type: object
      required:
        - db_host
        - db_port
        - project_id
        - evaluation_id
      properties:
        db_host:
          type: string
          example: "clickhouse"
        db_port:
          type: integer
          example: 9000
        project_id:
          type: integer
          example: 1
        evaluation_id:
          type: integer
          example: 1
    
    AODTRUCreateRequest:
      type: object
      required:
        - project_id
        - lat
        - lon
        - z
        - ru_roll
      properties:
        project_id:
          type: integer
          example: 1
        lat:
          description: 緯度
          type: number
          example: 0
        lon:
          description: 高度
          type: number
          example: 0
        z:
          type: number
          example: 0
        ru_roll:
          type: number
          example: 0
        ru_tilt:
          type: number
          example: 0
    
    AODTStageRequest:
      type: object
      required:
        - file_name
      properties:
        file_name:
          type: string
          example: "NYCU_API_TEST_cli.usd"
    
    AODTUECreateRequest:
      type: object
      required:
        - ue_x
        - ue_y
        - ue_radius
        - ue_cnt
      properties:
        ue_x:
          type: number
          description: UE X 座標
          example: 0
        ue_y:
          type: number
          description: UE Y 座標
          example: 0
        ue_radius:
          type: number
          description: UE 半徑 (公分)
          example: 100.0
        ue_cnt:
          type: integer
          description: UE 數量
          example: 10

    AODTDUCreateRequest:
      type: object
      required:
        - project_id
        - evaluation_id
        - lat
        - lon
        - z
      properties:
        project_id:
          type: integer
          example: 1
        evaluation_id:
          type: integer
          example: 1
        lat:
          type: number
          description: 緯度
          example: 0
        lon:
          type: number
          description: 經度
          example: 0
        z:
          type: number
          description: DU Z 座標
          example: 0

    AODTSimulationConfigRequest:
      oneOf:
        - $ref: '#/components/schemas/AODTSimulationSlotConfig'
        - $ref: '#/components/schemas/AODTSimulationDurationConfig'
      discriminator:
        propertyName: mode
        mapping:
          0: '#/components/schemas/AODTSimulationDurationConfig'
          1: '#/components/schemas/AODTSimulationSlotConfig'

    AODTSimulationProgressResponse:
      type: object
      properties:
        progress:
          type: number
          format: float
          description: 模擬進度百分比
          example: 75.0
        is_running:
          type: boolean
          description: 模擬是否正在運行
          example: true
    TaskUnfinish:
      type: object
      properties:
        status:
          type: string
          example: "PENDING"

    TaskInserted:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: 已經將計算任務放入對列中
        task_id: 
          type: string
          example: 08a2b9fd-af95-40d3-b836-5da67fdd6544
          
        

    # 配置 1: Slot 模式配置
    AODTSimulationSlotConfig:
      type: object
      required:
        - is_full
        - mode
        - slots_per_batch
        - samples_per_slot
      properties:
        is_full:
          type: boolean
          description: 是否完整模擬
          example: true
        mode:
          type: integer
          enum: [1]
          description: 模擬模式 (1 = Slot 模式)
          example: 1
        slots_per_batch:
          type: integer
          minimum: 1
          description: 每批次的 slot 數量
          example: 10
        samples_per_slot:
          type: integer
          minimum: 1
          description: 每個 slot 的採樣數
          example: 14


    # 配置 2: Duration 模式配置
    AODTSimulationDurationConfig:
      type: object
      required:
        - is_full
        - mode
        - duration
        - interval
      properties:
        is_full:
          type: boolean
          description: 是否完整模擬
          example: false
        mode:
          type: integer
          enum: [0]
          description: 模擬模式 (0 = Duration 模式)
          example: 0
        duration:
          type: number
          minimum: 0
          description: 模擬持續時間（秒）
          example: 60.0
        interval:
          type: number
          minimum: 0
          description: 採樣間隔（秒）
          example: 1.0

    AODTWorkflowRequest:
      type: object
      properties:
        db_host:
          type: string
          example: "clickhouse"
        db_port:
          type: integer
          example: 9000
        project_id:
          type: integer
          example: 1
        evaluation_id:
          type: integer
          example: 1
        dus:
          type: array
          items:
            type: object
            properties:
              lat:
                type: number
                description: 緯度
                example: 0
              lon:
                type: number
                description: 經度
                example: 0
              z:
                type: number
                description: DU Z 座標
                example: 0
        rus:
          type: array
          items:
            type: object
            properties:
              lat:
                type: number
                description: 緯度
                example: 0
              lon:
                type: number
                description: 經度
                example: 0
              z:
                type: number
                description: DU Z 座標
                example: 0
              ru_roll:
                type: number
                example: 0
        ues:
          $ref: '#/components/schemas/AODTUECreateRequest'
        rsrp_config:
          $ref: '#/components/schemas/AODTSimulationConfigRequest'
        throughput_config:
          $ref: '#/components/schemas/AODTSimulationSlotConfig'

  # RU 屬性管理相關 Schema
    RUPropertiesUpdateRequest:
      type: object
      properties:
        ru_path:
          type: string
          description: RU 的完整路徑
          example: "/RUs/ru_0001"
        height:
          type: number
          format: float
          description: RU 高度（公尺）
          minimum: 0.5
          maximum: 100.0
          example: 30.0
        mech_azimuth:
          type: number
          format: float
          description: 機械方位角（度）
          minimum: 0.0
          maximum: 360.0
          example: 45.0
        mech_tilt:
          type: number
          format: float
          description: 機械傾斜角（度）
          minimum: 0.0
          maximum: 360.0
          example: 15.0
      required: ["ru_path"]

    RUPropertiesUpdateResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "成功更新 RU 屬性: /RUs/ru_0001"
        updated_properties:
          type: object
          properties:
            ru_path:
              type: string
              example: "/RUs/ru_0001"
            height:
              type: number
              format: float
              nullable: true
              example: 30.0
            mech_azimuth:
              type: number
              format: float
              nullable: true
              example: 45.0
            mech_tilt:
              type: number
              format: float
              nullable: true
              example: -5.0
        summary:
          type: string
          example: "已更新: height=30.0m, azimuth=45.0°, tilt=15.0°"

    RUPropertiesResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        ru_path:
          type: string
          example: "/RUs/ru_0001"
        message:
          type: string
          example: "成功獲取 RU 屬性: /RUs/ru_0001"
        properties:
          type: object
          properties:
            height:
              type: number
              format: float
              nullable: true
              description: RU 高度（公尺）
              example: 30.0
            mech_azimuth:
              type: number
              format: float
              nullable: true
              description: 機械方位角（度）
              example: 45.0
            mech_tilt:
              type: number
              format: float
              nullable: true
              description: 機械傾斜角（度）
              example: 15.0
            cell_id:
              type: string
              nullable: true
              description: Cell ID
              example: "cell_001"
            du_id:
              type: string
              nullable: true
              description: DU ID
              example: "du_001"

tags:
  - name: Geocode
    description: Geocoding proxy endpoints
  - name: Auth
  - name: User
  - name: Project
  - name: Project_User
  - name: CU
  - name: DU
  - name: RU
  - name: Map
  - name: Brand
  - name: Evaluation
  - name: RUCache
  - name: AIModel
  - name: PrimitiveAIModel
  - name: MinIO
  - name: Chat
  - name: DT_AI_Model
  - name: AbstractMetrics
  - name: GNB
paths:
  /geocode/search:
    get:
      tags: [Geocode]
      summary: Geocode search (Taiwan)
      operationId: searchGeocode
      parameters:
        - name: q
          in: query
          description: Address or keywords to search.
          required: true
          schema:
            type: string
          minLength: 1
      responses:
        "200":
          description: Successful geocoding results (pass-through array).
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/GeocodeResult"
              examples:
                success:
                  value:
                    - place_id: 123456789
                      lat: "25.033964"
                      lon: "121.564468"
                      display_name: "台北101, 信義路五段, 信義區, 臺北市, 台灣"
                      type: "building"
                      class: "amenity"
                      importance: 0.8
                      address:
                        house_number: "7"
                        road: "信義路五段"
                        city_district: "信義區"
                        city: "臺北市"
                        country: "台灣"
                        country_code: "tw"
        "400":
          description: Missing or empty query parameter `q`.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missing_q:
                  value:
                    error: "Parameter 'q' is required and cannot be empty."
        "404":
          description: No results found for the given query.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotFoundResponse"
              examples:
                not_found:
                  value:
                    message: "找不到該地址，請確認格式或換個關鍵字"
                    results: []
        "502":
          description: Upstream error or connectivity issue.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpstreamErrorResponse"
        "504":
          description: Upstream geocoding service timed out.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /auth/register:
    post:
      summary: 註冊新使用者
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '200':
          description: 註冊成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: 帳號或郵箱已存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 註冊失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/login:
    post:
      summary: 使用者登入
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: 登入成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '401':
          description: 認證失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/logout:
    post:
      summary: 使用者登出
      tags:
        - Auth
      security:
        - cookieAuth: []
      responses:
        '200':
          description: 登出成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '401':
          description: 未授權
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # Project
  /projects:
    get:
      tags: [Project]
      summary: 取得所有 Project
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Project'
    post:
      tags: [Project]
      summary: 新增 Project
      requestBody:
        required: true
        consumes:
          - multipart/form-data
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProjectPostRequest'
      responses:
        '201':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '400':
          description: 錯誤的請求
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /projects/me:
    get:
      tags: [Project]
      summary: 取得當前使用者的所有 Project
      security:
        - cookieAuth: []
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Project'
        '401':
          description: 未授權
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /projects/{project_id}:
    get:
      tags: [Project]
      summary: 取得單一 Project
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [Project]
      summary: 更新 Project
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectPutRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [Project]
      summary: 刪除 Project
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  # Project 關聯的其他 APIs
  /projects/{project_id}/users:
    get:
      operationId: getProjectUsers
      tags: [Project]
      summary: 取得專案的所有使用者
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /projects/{project_id}/cus:
    get:
      operationId: getProjectCUs
      tags: [Project]
      summary: 取得專案的所有 CU
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CU'

  /projects/{project_id}/dus:
    get:
      operationId: getProjectDUs
      tags: [Project]
      summary: 取得專案的所有 DU
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DU'

  /projects/{project_id}/rus:
    get:
      operationId: getProjectRUs
      tags: [Project]
      summary: 取得專案的所有 RU
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RU'

  /projects/{project_id}/evaluations:
    get:
      operationId: getProjectEvaluations
      tags: [Project]
      summary: 取得專案的所有評估
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Evaluation'

  /projects/{project_id}/ai_models:
    get:
      tags: [Project]
      summary: 取得專案的所有 AI 模型
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIModel'
  
  /projects/{project_id}/rsrp:
    get:
      tags: [Project]
      summary: 取得專案的 RSRP 數據
      description: 獲取專案的 RSRP 數據（從 MinIO）
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      responses:
        '200':
          description: RSRP 數據獲取成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Message'
        '400':
          description: RSRP 尚未準備完成
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "RSRP not ready"
        '404':
          description: 專案不存在或 RSRP 數據不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Project not found"

    post:
      tags: [Project]
      summary: 上傳或更新專案的 RSRP 數據
      description: 將 RSRP 數據上傳到 MinIO 並更新專案狀態
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/ProjectRSRPRequest'
      responses:
        '200':
          description: RSRP 數據上傳成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "RSRP data uploaded successfully"
        '400':
          description: 無效數據
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid data"
        '404':
          description: 專案不存在或 MinIO bucket 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Bucket 'rsrp' does not exist."
        '500':
          description: 上傳失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to upload rsrp data"

  # 專案 Throughput 管理
  /projects/{project_id}/throughput:
    get:
      tags: [Project]
      summary: 取得專案的 Throughput 數據
      description: 獲取專案的 Throughput 數據（從 MinIO）
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      responses:
        '200':
          description: Throughput 數據獲取成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Message'
        '400':
          description: Throughput 尚未準備完成
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Throughput not ready"
        '404':
          description: 專案不存在或 Throughput 數據不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Throughput data not found"

    post:
      tags: [Project]
      summary: 上傳或更新專案的 Throughput 數據
      description: 將 Throughput 數據上傳到 MinIO 並更新專案狀態
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/ProjectThroughputRequest'
      responses:
        '200':
          description: Throughput 數據上傳成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Throughput data uploaded successfully"
        '400':
          description: 無效數據
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid data"
        '404':
          description: 專案不存在或 MinIO bucket 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Bucket 'throughput' does not exist."
        '500':
          description: 上傳失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to upload throughput data"

  # 專案 rsrp_dt 管理
  /projects/{project_id}/rsrp_dt:
    get:
      tags: [Project]
      summary: 取得專案的 rsrp_dt 數據
      description: 獲取專案的 Digital Twin RSRP RSRP 數據（從 MinIO）
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      responses:
        '200':
          description: rsrp_dt 數據獲取成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Message'
        '400':
          description: rsrp_dt 尚未準備完成
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "rsrp_dt not ready"
        '404':
          description: 專案不存在或 rsrp_dt 數據不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "rsrp_dt data not found"

    post:
      tags: [Project]
      summary: 上傳或更新專案的 rsrp_dt 數據
      description: 將 Digital Twin RSRP 數據上傳到 MinIO 並更新專案狀態
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/ProjectRSRPDTRequest'
      responses:
        '200':
          description: rsrp_dt 數據上傳成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "rsrp_dt data uploaded successfully"
        '400':
          description: 無效數據
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid data"
        '404':
          description: 專案不存在或 MinIO bucket 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Bucket 'rsrp_dt' does not exist."
        '500':
          description: 上傳失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to upload rsrp_dt data"

  # 專案 ThroughputDT 管理
  /projects/{project_id}/throughput_dt:
    get:
      tags: [Project]
      summary: 取得專案的 ThroughputDT 數據
      description: 獲取專案的 Digital Twin Throughput 數據（從 MinIO）
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      responses:
        '200':
          description: ThroughputDT 數據獲取成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Message'
        '400':
          description: ThroughputDT 尚未準備完成
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ThroughputDT not ready"
        '404':
          description: 專案不存在或 ThroughputDT 數據不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ThroughputDT data not found"

    post:
      tags: [Project]
      summary: 上傳或更新專案的 ThroughputDT 數據
      description: 將 Digital Twin Throughput 數據上傳到 MinIO 並更新專案狀態
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/ProjectThroughputDTRequest'
      responses:
        '200':
          description: ThroughputDT 數據上傳成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ThroughputDT data uploaded successfully"
        '400':
          description: 無效數據
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid data"
        '404':
          description: 專案不存在或 MinIO bucket 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Bucket 'throughput_dt' does not exist."
        '500':
          description: 上傳失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to upload throughput_dt data"

  # 專案狀態管理
  /projects/{project_id}/status:
    get:
      tags: [Project]
      summary: 取得專案的所有狀態
      description: 獲取專案的 rsrp、throughput、rsrp_dt、throughput_dt 狀態
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      responses:
        '200':
          description: 狀態獲取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectStatus'
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Project not found"

  # 個別狀態更新
  /projects/{project_id}/status/rsrp:
    put:
      tags: [Project]
      summary: 更新專案的 RSRP 狀態
      description: 更新專案的 RSRP 處理狀態
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectStatusUpdateRequest'
      responses:
        '200':
          description: 狀態更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "RSRP status updated successfully"
        '400':
          description: 無效狀態值
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid status"
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Project not found"

  /projects/{project_id}/status/throughput:
    put:
      tags: [Project]
      summary: 更新專案的 Throughput 狀態
      description: 更新專案的 Throughput 處理狀態
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectStatusUpdateRequest'
      responses:
        '200':
          description: 狀態更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Throughput status updated successfully"
        '400':
          description: 無效狀態值
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid status"
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Project not found"

  /projects/{project_id}/status/rsrp_dt:
    put:
      tags: [Project]
      summary: 更新專案的 rsrp_dt 狀態
      description: 更新專案的 Digital Twin RSRP 處理狀態
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectStatusUpdateRequest'
      responses:
        '200':
          description: 狀態更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "rsrp_dt status updated successfully"
        '400':
          description: 無效狀態值
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid status"
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Project not found"

  /projects/{project_id}/status/throughput_dt:
    put:
      tags: [Project]
      summary: 更新專案的 ThroughputDT 狀態
      description: 更新專案的 Digital Twin Throughput 處理狀態
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
          description: 專案 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectStatusUpdateRequest'
      responses:
        '200':
          description: 狀態更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ThroughputDT status updated successfully"
        '400':
          description: 無效狀態值
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid status"
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Project not found"

  /projects/{project_id}/maps_frontend:
    get:
      tags: [Project]
      summary: 取得專案的 Frontend Map（MinIO 內容）
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /projects/{project_id}/maps:
    post:
      tags: [Project]
      summary: 新增或更新專案 Map
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                map_aodt:
                  type: object
                  description: AODT 地圖內容（JSON）
                map_frontend:
                  type: object
                  description: Frontend 地圖內容（JSON）
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Map'
        '201':
          description: 新增成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Map'
        '400':
          description: 請求錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'    

    
  /projects/{project_id}/deploy/{evaluation_id}:
    post:
      operationId: deployEvaluation
      tags: [Project]
      summary: 將選定的evaluation部署，加入CU、DU、RU
      parameters:
        - in: path
          name: project_id
          required: true
          schema: 
            type: integer
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectSetDeploy'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error' 

  /projects/{project_id}/map_correction:
    put:
      tags: [Project]
      summary: 校正原始 gltf 地圖位置及大小
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MapCorrectionRequest'
      responses:
        '200':
          description: 成功
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error' 
                    
  # User
  /users/me:
    get:
      tags: [User]
      summary: 取得當前登入的 User
      security:
        - cookieAuth: []
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: 未授權
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /users:
    get:
      tags: [User]
      summary: 取得所有 User
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'

  /users/{user_id}:
    get:
      tags: [User]
      summary: 取得單一 User
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [User]
      summary: 更新 User
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User_put_body'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [User]
      summary: 刪除 User
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # Project_User
  /user_projects/{user_id}/{project_id}:
    post:
      tags: [Project_User]
      summary: 新增 User 到 Project
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: integer
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProjectRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProject'
        '404':
          description: 找不到 User 或 Project
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: User 已經在 Project 中
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    put:
      tags: [Project_User]
      summary: 更新 User 在 Project 中的角色
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: integer
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProjectRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProject'
        '404':
          description: 找不到 User 或 Project
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /user_projects/{project_id}/role:
    get:
      operationId: getUserProjectRole
      tags: [Project_User]
      summary: 取得我在指定 Project 中的角色
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserProjectRole'
        '404':
          description: 找不到 User
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /projects/{project_id}/chat_sessions:
    get:
      tags: [Chat]
      summary: 取得當前 project 的所有 chat_sessions
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 取得當前 project 的所有 chat_sessions 成功
          content:
            application/json:
              schema:
                type: object
        '404':
          description: 取得當前 project 的所有 chat_sessions 失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      
    post:
      tags: [Chat]
      summary: 建立新的 chat_sessions
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatSessionTitle'
      responses:
        '200':
          description: 建立新的 chat_sessions 成功
          content: 
            application/json:
              schema:
                type: object
        '404':
          description: 建立新的 chat_sessions 失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error' 

  /chat_sessions/{chat_session_id}:
    put:
      tags: [Chat]
      summary: 編輯 chat_session 的標題
      parameters:
        - in: path
          name: chat_session_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatSessionTitle'
      responses:
        '200':
          description: 編輯 chat_session 的標題 成功
          content: 
            application/json:
              schema:
                type: object
        '404':
          description: 編輯 chat_session 的標題 失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error' 
    delete:
      tags: [Chat]
      summary: 刪除一個 chat_session
      parameters:
        - in: path
          name: chat_session_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 刪除一個 chat_session 成功
          content:
            application/json:
              schema:
                type: object
        '404':
          description: 刪除一個 chat_session 失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /chat_sessions/{chat_session_id}/messages:
    get:
      tags: [Chat]  
      summary: 取得一個 chat_session 的 所有 chat_messages
      parameters:
        - in: path
          name: chat_session_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 取得一個 chat_session 的 所有 chat_messages成功
          content:
            application/json:
              schema:
                type: object
        '404':
          description: 取得一個 chat_session 的 所有 chat_messages失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    post:
      tags: [Chat]
      summary: 新增一條 chat_message 到 chat_session
      parameters:
        - in: path
          name: chat_session_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatMessage'
      responses:
        '200':
          description: 新增一條 chat_message 到 chat_session 成功
          content:
            application/json:
              schema:
                type: object
        '400':
          description: 新增一條 chat_message 到 chat_session 失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # Evaluation
  /evaluations:
    get:
      tags: [Evaluation]
      summary: 取得所有 Evaluation
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Evaluation'
    post:
      tags: [Evaluation]
      summary: 新增 Evaluation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationRequest'
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Evaluation'

  /evaluations/{evaluation_id}:
    get:
      tags: [Evaluation]
      summary: 取得單一 Evaluation
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema: 
            type: integer
      responses:
          '200': 
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Evaluation'
          '404': 
            description: 找不到
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
    put:
      tags: [Evaluation]
      summary: 更新 Evaluation
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema: 
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationRequest'
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Evaluation'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [Evaluation]
      summary: 刪除 Evaluation
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema: 
            type: integer
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '404': 
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /evaluations/rsrp:
    post:
      tags: [Evaluation]
      summary: 上傳或更新評估的 RSRP 資料
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationHeatmap'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "RSRP data uploaded successfully"
        '400':
          description: 無效數據
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid data"
        '404':
          description: 評估不存在或 MinIO bucket 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Bucket 'rsrp' does not exist."
        '500':
          description: 上傳失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to upload rsrp data"

  /evaluations/rsrp/failed:
    post:
      tags: [Evaluation]
      summary: 重置評估的 RSRP 資料狀態為失敗
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                evaluation_id:
                  type: integer
                  example: 1
                message:
                  type: string
                  example: "計算錯誤，請重新計算"
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "RSRP status reset to FAILURE"
        '404':
          description: 找不到評估
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"
        '400':
          description: 無法重置臨時評估的狀態
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Cannot reset status for temporary evaluation"

  /evaluations/{evaluation_id}/rsrp:
    get:
      tags: [Evaluation]
      summary: 取得評估的 RSRP 資料
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  rsrp:
                    type: object
                    description: RSRP 資料
        '400':
          description: RSRP 尚未準備完成
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: 專案或評估不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /evaluations/throughput:
    post:
      tags: [Evaluation]
      summary: 上傳或更新評估的 Throughput 資料
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationHeatmap'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Throughput data uploaded successfully"
        '400':
          description: 無效數據
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid data"
        '404':
          description: 評估不存在或 MinIO bucket 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Bucket 'throughput' does not exist."
        '500':
          description: 上傳失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to upload throughput data"

  /evaluations/throughput/failed:
    post:
      tags: [Evaluation]
      summary: 重置評估的 Throughput 資料狀態為失敗
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                evaluation_id:
                  type: integer
                message:
                  type: string
                  example: "計算錯誤，請重新計算"
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Throughput status reset to FAILURE"
        '404':
          description: 找不到評估
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"
        '400':
          description: 無法重置臨時評估的狀態
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Cannot reset status for temporary evaluation"

  /evaluations/{evaluation_id}/throughput:
    get:
      tags: [Evaluation]
      summary: 取得評估的 Throughput 資料
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  throughput:
                    type: object
                    description: Throughput 資料
        '400':
          description: Throughput 尚未準備完成
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: 專案或評估不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /evaluations/rsrp_dt:
    post:
      tags: [Evaluation]
      summary: 上傳或更新評估的 rsrp_dt 資料
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationHeatmap'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "rsrp_dt data uploaded successfully"
        '400':
          description: 無效數據
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid data"
        '404':
          description: 評估不存在或 MinIO bucket 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Bucket 'rsrp_dt' does not exist."
        '500':
          description: 上傳失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to upload rsrp_dt data"

  /evaluations/rsrp_dt/failed:
    post:
      tags: [Evaluation]
      summary: 重置評估的 rsrp_dt 資料狀態為失敗
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                evaluation_id:
                  type: integer
                message:
                  type: string
                  example: "計算錯誤，請重新計算"
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "rsrp_dt status reset to FAILURE"
        '404':
          description: 找不到評估
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"
        '400':
          description: 無法重置臨時評估的狀態
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Cannot reset status for temporary evaluation"

  /evaluations/{evaluation_id}/rsrp_dt:
    get:
      tags: [Evaluation]
      summary: 取得評估的 rsrp_dt 資料
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  rsrp_dt:
                    type: object
                    description: rsrp_dt 資料
        '400':
          description: rsrp_dt 尚未準備完成
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: 專案或評估不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /evaluations/throughput_dt:
    post:
      tags: [Evaluation]
      summary: 上傳或更新評估的 ThroughputDT 資料
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationHeatmap'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ThroughputDT data uploaded successfully"
        '400':
          description: 無效數據
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid data"
        '404':
          description: 評估不存在或 MinIO bucket 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Bucket 'throughput_dt' does not exist."
        '500':
          description: 上傳失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Failed to upload throughput_dt data"

  /evaluations/throughput_dt/failed:
    post:
      tags: [Evaluation]
      summary: 重置評估的 ThroughputDT 資料狀態為失敗
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                evaluation_id:
                  type: integer
                message:
                  type: string
                  example: "計算錯誤，請重新計算"
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ThroughputDT status reset to FAILURE"
        '404':
          description: 找不到評估
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"
        '400':
          description: 無法重置臨時評估的狀態
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Cannot reset status for temporary evaluation"

  /evaluations/{evaluation_id}/throughput_dt:
    get:
      tags: [Evaluation]
      summary: 取得評估的 ThroughputDT 資料
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  throughput_dt:
                    type: object
                    description: ThroughputDT 資料
        '400':
          description: ThroughputDT 尚未準備完成
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: 專案或評估不存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /evaluations/{evaluation_id}/status/rsrp:
    put:
      tags: [Evaluation]
      summary: 修改evaluation的rsrp狀態 
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationStatusUpdateRequest'
      responses:
        '200':
          description: 狀態更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "rsrp status updated successfully"
        '400':
          description: 無效狀態值 
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid status"
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"

  /evaluations/{evaluation_id}/status/throughput:
    put:
      tags: [Evaluation]
      summary: 修改evaluation的throughput狀態 
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationStatusUpdateRequest'
      responses:
        '200':
          description: 狀態更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Throughput status updated successfully"
        '400':
          description: 無效狀態值 
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid status"
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"

  /evaluations/{evaluation_id}/status/rsrp_dt:
    put:
      tags: [Evaluation]
      summary: 修改evaluation的heatmapDT狀態 
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationStatusUpdateRequest'
      responses:
        '200':
          description: 狀態更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "rsrp_dt status updated successfully"
        '400':
          description: 無效狀態值 
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid status"
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"

  /evaluations/{evaluation_id}/status/throughputDT:
    put:
      tags: [Evaluation]
      summary: 修改evaluation的throughputDT狀態 
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EvaluationStatusUpdateRequest'
      responses:
        '200':
          description: 狀態更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ThroughputDT status updated successfully"
        '400':
          description: 無效狀態值 
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid status"
        '404':
          description: 專案不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"

  /evaluations/{evaluation_id}/discard:
    post:
      tags: [Evaluation]
      summary: 丟棄指定的 Evaluation（將所有狀態設為 DISCARDED）
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Evaluation 丟棄成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation discarded successfully"
        '404':
          description: 找不到 Evaluation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"

  /evaluations/reset-status:
    post:
      tags: [Evaluation]
      summary: reset the status of 4 heatmaps to WAITING
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                evaluation_id:
                  type: integer
                  description: Evaluation ID
                  example: 1

      responses:
        '200':
          description: Status reset successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Status reset successfully"
        '404':
          description: 找不到 Evaluation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Evaluation not found"

  # RUCache
  /rucaches:
    get:
      tags: [RUCache]
      summary: 取得所有 RUCache
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RU'
    post:
      tags: [RUCache]
      summary: 新增 RUCache
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RURequest'
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RU'
  /rucaches/{RU_id}:
    get:
      tags: [RUCache]
      summary: 取得單一 RUCache
      parameters:
        - in: path
          name: RU_id
          required: true
          schema: 
            type: integer
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RU'
        '404': 
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [RUCache]
      summary: 更新 RUCache
      parameters:
        - in: path
          name: RU_id
          required: true
          schema: 
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RURequest'
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RU'
        '404': 
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [RUCache]
      summary: 刪除 RUCache
      parameters:
        - in: path
          name: RU_id
          required: true
          schema: 
            type: integer
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '404': 
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /ru_cache/<int:RU_id>/location:
    put:
      tags: [RUCache]
      summary: 更新 RUCache 的位置
      parameters:
        - in: path
          name: RU_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RULocationRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RU'
        '404':
          description: 找不到 RUCache
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # CU
  /cus:
    get:
      operationId: getCUs
      tags: [CU]
      summary: 取得所有 CU
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CU'
    post:
      tags: [CU]
      summary: 新增 CU
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CURequest'
      responses:
        '201': 
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CU'
                
  /cus/{CU_id}:
    get:
      operationId: getCU
      tags: [CU]
      summary: 取得單一 CU
      parameters:
        - in: path
          name: CU_id
          required: true
          schema: 
            type: integer
      responses:
        '200': 
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CU'
        '404': 
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    put:
      tags: [CU]
      summary: 更新 CU
      parameters:
        - in: path
          name: CU_id
          required: true
          schema: 
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CURequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CU'
        '404': 
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [CU]
      summary: 刪除 CU
      parameters:
        - in: path
          name: CU_id
          required: true
          schema: 
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'

  # DU
  /dus:
    get:
      operationId: getDUs
      tags: [DU]
      summary: 取得所有 DU
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DU'
    post:
      tags: [DU]
      summary: 新增 DU
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DURequest'
      responses:
        '201':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DU'

  /dus/{DU_id}:
    get:
      operationId: getDU
      tags: [DU]
      summary: 取得單一 DU
      parameters:
        - in: path
          name: DU_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DU'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [DU]
      summary: 更新 DU
      parameters:
        - in: path
          name: DU_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DURequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DU'
    delete:
      tags: [DU]
      summary: 刪除 DU
      parameters:
        - in: path
          name: DU_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'

  # # RU
  /rus:
    get:
      operationId: getRUs
      tags: [RU]
      summary: 取得所有 RU
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RU'
    post:
      tags: [RU]
      summary: 新增 RU
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RURequest'
      responses:
        '201':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RU'

  /rus/{RU_id}:
    get:
      operationId: getRU
      tags: [RU]
      summary: 取得單一 RU
      parameters:
        - in: path
          name: RU_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RU'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [RU]
      summary: 更新 RU
      parameters:
        - in: path
          name: RU_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RURequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RU'
    delete:
      tags: [RU]
      summary: 刪除 RU
      parameters:
        - in: path
          name: RU_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'

  /rus/<int:RU_id>/location:
    put:
      tags: [RU]
      summary: 更新 RU 的位置
      parameters:
        - in: path
          name: RU_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RULocationRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RU'
        '404':
          description: 找不到 RU
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'


  /ai_models:
    get:
      tags: [AIModel]
      summary: 取得所有 AIModel
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIModel'
    post:
      tags: [AIModel]
      summary: 新增 AIModel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIModelRequest'
      responses:
        '201':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'

  /ai_models/{AI_model_id}:
    get:
      tags: [AIModel]
      summary: 取得單一 AIModel
      parameters:
        - in: path
          name: AI_model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [AIModel]
      summary: 更新 AIModel
      parameters:
        - in: path
          name: AI_model_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIModelRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [AIModel]
      summary: 刪除 AIModel
      parameters:
        - in: path
          name: AI_model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /ai_models/{AI_model_id}/activate:
    post:
      tags: [AIModel]
      summary: 啟用 AIModel
      parameters:
        - in: path
          name: AI_model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 啟用成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'
        '404':
          description: 找不到 AIModel
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /ai_models/{AI_model_id}/deactivate:
    post:
      tags: [AIModel]
      summary: 停用 AIModel
      parameters:
        - in: path
          name: AI_model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 停用成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'
        '404':
          description: 找不到 AIModel
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /ai_models/{AI_model_id}/start-training:
    post:
      tags: [AIModel]
      summary: 開始訓練 AIModel
      parameters:
        - in: path
          name: AI_model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 訓練啟動成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'
        '404':
          description: 找不到 AIModel
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /ai_models/{AI_model_id}/stop-training:
    post:
      tags: [AIModel]
      summary: 停止訓練 AIModel
      parameters:
        - in: path
          name: AI_model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 訓練停止成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'
        '404':
          description: 找不到 AIModel
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /ai_models/{AI_model_id}/enable-update:
    post:
      tags: [AIModel]
      summary: 啟用 AIModel 更新
      parameters:
        - in: path
          name: AI_model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 啟用更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'
        '404':
          description: 找不到 AIModel
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /ai_models/{AI_model_id}/disable-update:
    post:
      tags: [AIModel]
      summary: 停用 AIModel 更新
      parameters:
        - in: path
          name: AI_model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 停用更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIModel'
        '404':
          description: 找不到 AIModel
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # DTAIModel
  /dt_ai_models:
    get:
      tags: [DTAIModel]
      summary: 取得所有 DTAIModel
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DTAIModel'
    post:
      tags: [DTAIModel]
      summary: 新增 DTAIModel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DTAIModelRequest'
      responses:
        '201':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DTAIModel'

  /dt_ai_models/{model_id}:
    get:
      tags: [DTAIModel]
      summary: 取得單一 DTAIModel
      parameters:
        - in: path
          name: model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DTAIModel'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [DTAIModel]
      summary: 更新 DTAIModel
      parameters:
        - in: path
          name: model_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DTAIModelRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DTAIModel'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [DTAIModel]
      summary: 刪除 DTAIModel
      parameters:
        - in: path
          name: model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  #AbstractMetrics
  /abstract_metrics:
    get:
      tags: [AbstractMetrics]
      summary: 取得所有 AbstractMetrics
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AbstractMetricsShow'
    post:
      tags: [AbstractMetrics]
      summary: 新增 AbstractMetrics
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - display_name
              properties:
                display_name:
                  type: string
                  example: "Cell ON/OFF"
      responses:
        '200':
          description: 新增成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbstractMetricsShow'
        '400':
          description: 請求錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "display_name is required"

  /abstract_metrics/{metrics_id}:
    get:
      tags: [AbstractMetrics]
      summary: 取得單一 AbstractMetrics
      parameters:
        - in: path
          name: metrics_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbstractMetricsShow'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "AbstractMetrics not found"
    put:
      tags: [AbstractMetrics]
      summary: 更新 AbstractMetrics
      parameters:
        - in: path
          name: metrics_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                display_name:
                  type: string
                  example: "Cell ON/OFF"
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbstractMetricsShow'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "AbstractMetrics not found"
        '400':
          description: 請求錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "display_name is required"
    delete:
      tags: [AbstractMetrics]
      summary: 刪除 AbstractMetrics
      parameters:
        - in: path
          name: metrics_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 刪除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "AbstractMetrics 1 deleted successfully"
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "AbstractMetrics not found"

  # BrandMetrics
  /brand_metrics/unique-names:
    get:
      tags: [Brand]
      summary: 取得所有唯一的 BrandMetrics 參數名稱
      description: 回傳資料庫中所有唯一的 BrandMetrics.name
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  unique_names:
                    type: array
                    items:
                      type: string
                    example: ["# of UE per cell ", "DL throughput per cell ", "UL throughput per cell "]

  # Brand
  /brands:
    get:
      tags: [Brand]
      summary: 取得所有品牌
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Brand'
    post:
      tags: [Brand]
      summary: 新增品牌
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BrandRequest'
      responses:
        '200':
          description: 新增成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Brand'
        '400':
          description: 品牌名稱已存在或資料錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /brands/{brand_id}:
    get:
      tags: [Brand]
      summary: 取得單一品牌
      parameters:
        - in: path
          name: brand_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Brand'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [Brand]
      summary: 更新品牌
      parameters:
        - in: path
          name: brand_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BrandRequestPut'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Brand'
        '400':
          description: metric 不存在或資料錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [Brand]
      summary: 刪除品牌
      parameters:
        - in: path
          name: brand_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 刪除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # PrimitiveAIModel
  /primitive_ai_models:
    get:
      tags: [PrimitiveAIModel]
      summary: 取得所有 PrimitiveAIModel
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PrimitiveAIModel'
    post:
      tags: [PrimitiveAIModel]
      summary: 新增 PrimitiveAIModel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PrimitiveAIModelRequest'
      responses:
        '201':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrimitiveAIModel'
        '400':
          description: model_name 已存在
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /primitive_ai_models/{model_id}:
    get:
      tags: [PrimitiveAIModel]
      summary: 取得單一 PrimitiveAIModel
      parameters:
        - in: path
          name: model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PrimitiveAIModel'
                  - type: object
                    properties:
                      ai_metrics:
                        type: array
                        items:
                          type: object
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [PrimitiveAIModel]
      summary: 更新 PrimitiveAIModel
      parameters:
        - in: path
          name: model_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PrimitiveAIModelRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrimitiveAIModel'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [PrimitiveAIModel]
      summary: 刪除 PrimitiveAIModel
      parameters:
        - in: path
          name: model_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: PrimitiveAIModel 1 deleted successfully
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # Map
  /maps:
    get:
      tags: [Map]
      summary: 取得所有 Map
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Map'
    post:
      tags: [Map]
      summary: 新增 Map
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MapRequest'
      responses:
        '201':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Map'

  /maps/{map_id}:
    get:
      tags: [Map]
      summary: 取得單一 Map
      parameters:
        - in: path
          name: map_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Map'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags: [Map]
      summary: 更新 Map
      parameters:
        - in: path
          name: map_id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MapRequest'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Map'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags: [Map]
      summary: 刪除 Map
      parameters:
        - in: path
          name: map_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '404':
          description: 找不到
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /minio/ensure_bucket:
    post:
      tags: [MinIO]
      summary: 確保 MinIO bucket 存在
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bucket:
                  type: string
                  example: rsrp
      responses:
        '200':
          description: Bucket 存在或已建立
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
        '404':
          description: Bucket 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Bucket 不存在"

  /minio/upload_json:
    post:
      tags: [MinIO]
      summary: 上傳 JSON 字串到 MinIO
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bucket:
                  type: string
                  example: rsrp
                object_name:
                  type: string
                  example: test.json
                json_str:
                  type: string
                  example: '{"a":1,"b":2}'
      responses:
        '200':
          description: 結果
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean

  /minio/get_json:
    post:
      tags: [MinIO]
      summary: 取得 MinIO 內的 JSON 字串
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bucket:
                  type: string
                  example: rsrp
                object_name:
                  type: string
                  example: test.json
      responses:
        '200':
          description: 結果
          content:
            application/json:
              schema:
                type: object
                properties:
                  json:
                    type: string
                    example: '{"a":1,"b":2}'

  /minio/delete_object:
    post:
      tags: [MinIO]
      summary: 刪除 MinIO 內的物件
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bucket:
                  type: string
                  example: rsrp
                object_name:
                  type: string
                  example: test.json
      responses:
        '200':
          description: 刪除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
        '400':
          description: 缺少參數
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Missing parameter
        '404':
          description: 找不到 bucket 或 object
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
        '500':
          description: 刪除失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
  
  # AODT APIs
  /aodt/status:
    get:
      tags: [AODT]
      summary: 取得 AODT 服務狀態
      description: 檢查 AODT 服務是否正常運行
      responses:
        '200':
          description: AODT 服務正常
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTStatusResponse'
        '503':
          description: AODT 服務不可用
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTStatusResponse'

  /aodt/connect:
    post:
      tags: [AODT]
      summary: 連接到 AODT 資料庫
      description: 建立與 AODT 系統的資料庫連接並附加 worker
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTConnectionRequest'
      responses:
        '200':
          description: 連接成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 連接失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/open-stage:
    post:
      tags: [AODT]
      summary: 開啟 AODT USD Stage
      description: 在 AODT 中開啟指定的 USD Stage 檔案
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTStageRequest'
      responses:
        '200':
          description: USD Stage 開啟成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 開啟失敗或缺少參數
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/simulation-config:
    post:
      tags: [AODT]
      summary: 設定 AODT 模擬配置
      description: |
        配置 AODT 模擬參數，支援兩種模式：
        - **Mode 0**: 計算 rsrp
        - **Mode 1**: 計算 throughput
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTSimulationConfigRequest'
            examples:
              duration_mode:
                summary: Mode 0
                description: 計算 rsrp
                value:
                  is_full: false
                  mode: 0
                  duration: 60.0
                  interval: 1.0
              slot_mode:
                summary: Mode 1
                description: 計算 throughput
                value:
                  is_full: true
                  mode: 1
                  slots_per_batch: 10
                  samples_per_slot: 1
      responses:
        '200':
          description: 模擬配置設定成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 配置失敗或缺少必要參數
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/workflow/start:
    post:
      tags: [AODT]
      summary: 啟動完整的 AODT (rsrp) 工作流程
      description:
        執行完整的 AODT (rsrp) 工作流程，包括：
        1. 傳入 USD 檔案
        2. 連接資料庫
        3. 開啟 USD Stage（可選）
        4. 設定模擬配置（可選）
        5. 刪除現有的 DU 和 RU
        6. 建立 pannel
        7. 創建 DU 和 RU
        8. 自動分配 DU
        9. 自動部署 UE
        10. 開始模擬
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTWorkflowRequest'
            
      responses:
        '202':
          description: 將工作流程放入queue中
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskInserted'
        '400':
          description: 工作流程啟動失敗或缺少必要參數
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error' 
        '500':
          description: 內部伺服器錯誤 
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error' 
                  
  /aodt/ru/create:
    post:
      tags: [AODT]
      summary: 創建單個 RU
      description: 在 AODT 中創建一個 RU 於指定座標
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTRUCreateRequest'
      responses:
        '200':
          description: RU 創建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 創建失敗或缺少參數
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/ru/create-batch:
    post:
      tags: [AODT]
      summary: 批量創建 RU
      description: 在 AODT 中批量創建多個 RU
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTRUBatchCreateRequest'
            examples:
              batch_example:
                summary: 批量創建範例
                description: 創建 3 個 RU 的範例
                value:
                  rus:
                    - lat: 10.0
                      lon: 20.0
                      z: 5.0
                      ru_roll: 0.0
                    - lat: 15.0
                      lon: 25.0
                      z: 5.0
                      ru_roll: 90.0
                    - lat: 20.0
                      lon: 30.0
                      z: 5.0
                      ru_roll: 180.0
      responses:
        '200':
          description: 批量創建完成（全部成功）
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTBatchCreateResponse'
        '207':
          description: 批量創建完成（部分成功）
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTBatchCreateResponse'
        '500':
          description: 批量創建失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/ru/set-direction:
    post:
      tags: [AODT]
      summary: 設定 RU 方向
      description: 設定最後創建的 RU 的方向角度
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTRUCreateRequest'
      responses:
        '200':
          description: RU 方向設定成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 設定失敗或缺少參數
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/ru/delete-all:
    delete:
      tags: [AODT]
      summary: 刪除所有 RU
      description: 刪除 AODT 場景中的所有 RU
      responses:
        '200':
          description: 所有 RU 刪除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 刪除失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  # DU 管理 APIs
  /aodt/du/create:
    post:
      tags: [AODT]
      summary: 創建單個 DU
      description: 在 AODT 中創建一個 DU 於指定座標
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTDUCreateRequest'
      responses:
        '200':
          description: DU 創建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 創建失敗或缺少參數
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/du/delete-all:
    delete:
      tags: [AODT]
      summary: 刪除所有 DU
      description: 刪除 AODT 場景中的所有 DU
      responses:
        '200':
          description: 所有 DU 刪除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 刪除失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
  
  /aodt/du/create-batch:
    post:
      tags: [AODT]
      summary: 批量創建 DU
      description: 在 AODT 中批量創建多個 DU
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTDUBatchCreateRequest'
            examples:
              batch_example:
                summary: 批量創建範例
                description: 創建 3 個 DU 的範例
                value:
                  dus:
                    - x: 10.0
                      y: 20.0
                      z: 5.0
                    - x: 15.0
                      y: 25.0
                      z: 5.0
                    - x: 20.0
                      y: 30.0
                      z: 5.0
      responses:
        '200':
          description: 批量創建完成（全部成功）
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTBatchCreateResponse'
        '207':
          description: 批量創建完成（部分成功）
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTBatchCreateResponse'
        '500':
          description: 批量創建失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/du/auto-assign:
    post:
      tags: [AODT]
      summary: 自動分配 DU 給所有 RU
      description: 自動將 DU 分配給場景中的所有 RU
      responses:
        '200':
          description: DU 自動分配成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 分配失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
  /aodt/ues/create-direct:
    post:
      tags: [AODT]
      summary: 直接創建 UE
      description: 在 AODT 中隨機建立指定數量的 UE
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTUECreateRequest'
      responses:
        '200':
          description: UE 創建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 創建失敗或缺少參數
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
  /aodt/generate-ue-mobility:
    get:
      tags: [AODT]
      summary: 生成 UE 移動性
      responses:
        '200':
          description: UE 移動性生成成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 生成失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
  
  /aodt/start-simulation:
    post:
      tags: [AODT]
      summary: 開始 AODT 模擬
      description: 啟動 AODT 模擬流程
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                project_id:
                  type: integer
                  description: 專案 ID
                  example: 1
                evaluation_id:
                  type: integer
                  description: 評估 ID
                  example: 1
              required:
                - project_id
      responses:
        '200':
          description: 模擬啟動成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 啟動失敗
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/simulation_progress:
    get:
      tags: [AODT]
      summary: 取得 AODT 模擬進度
      description: 獲取當前 AODT 模擬的進度資訊
      responses:
        '200':
          description: 成功獲取模擬進度
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTSimulationProgressResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
  
  /aodt/workflow/is_sim_running:
    get:
      tags: [AODT]
      summary: 檢查 AODT 模擬是否正在運行
      description: 確認 AODT 模擬是否仍在進行中
      responses:
        '200':
          description: 成功檢查模擬狀態
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/workflow/throughput:
    post:
      tags: [AODT]
      summary: 啟動 AODT (throughput) 的完整工作流程
      description:
        執行完整的 AODT (throughput) 工作流程，包括：
        1. 傳入 USD 檔案
        2. 連接資料庫
        3. 開啟 USD Stage（可選）
        4. 設定模擬配置（可選）
        5. 刪除現有的 DU 和 RU
        6. 建立 pannel
        7. 創建 DU 和 RU
        8. 自動分配 DU
        9. 自動部署 UE
        10. 開始模擬
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AODTWorkflowRequest'
      responses:
        '200':
          description: Heatmap 上傳成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Heatmap uploaded successfully"
        '400':
          description: 上傳失敗或缺少參數
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: "Missing heatmap file or project ID"
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: "Internal server error"
                    
  /aodt/panel/create:
    post:
      tags: [AODT]
      summary: 創建 Panel
      description: 創建一個新的 Panel
      responses:
        '200':
          description: 成功創建 Panel
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 成功創建 Panel
                  data:
                    type: object
                    properties:
                      panel_path:
                        type: string
                        example: "/path/to/panel"
                      panel_name:
                        type: string
                        example: "Panel1"
        '400':
          description: 創建失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Panel 創建失敗
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: 創建 Panel 錯誤

  /aodt/panel/create-batch:
    post:
      tags: [AODT]
      summary: 批量創建 Panel
      description: 批量創建多個 Panel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                count:
                  type: integer
                  description: 要創建的 Panel 數量
                  example: 3
      responses:
        '200':
          description: 批量創建成功（全部成功）
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  summary:
                    type: object
                  results:
                    type: array
                    items:
                      type: object
        '207':
          description: 批量創建完成（部分成功）
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  summary:
                    type: object
                  results:
                    type: array
                    items:
                      type: object
        '400':
          description: 請求錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string

  /aodt/panel/check-config:
    get:
      tags: [AODT]
      summary: 檢查 Panel 配置
      description: 檢查 Panel 的配置狀態
      responses:
        '200':
          description: Panel 配置檢查完成
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Panel 配置檢查完成
                  data:
                    type: object
                    properties:
                      panel_asset_path_configured:
                        type: boolean
                        example: true
                      panel_asset_path:
                        type: string
                        example: "/path/to/panel/assets"
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: 檢查 Panel 配置錯誤
  
  /aodt/panel/count:
    get:
      tags: [AODT]
      summary: 取得當前場景中 Panel 的數量
      description: 回傳目前場景中的 Panel 數量
      responses:
        '200':
          description: 成功取得 Panel 數量
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 成功取得 Panel 數量
                  data:
                    type: object
                    properties:
                      panel_count:
                        type: integer
                        example: 3
        '400':
          description: 取得 Panel 數量失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: 取得 Panel 數量失敗
        '500':
          description: 取得 Panel 數量錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: 取得 Panel 數量錯誤

  /aodt/create-files:
    post:
      tags: [AODT]
      summary: 在 omniverse server 裡面建立 usd 檔案
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                project_id:
                  type: integer
                  example: 1
      responses:
        '200':
          description: 檔案建立成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 檔案建立成功

        '500':
          description: 伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: 伺服器錯誤


  /aodt/delete-file:
    post:
      tags: [AODT]
      summary: 在 omniverse server 裡面刪除檔案
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                file_name:
                  type: string
                  example: aodt_map_1.usd
      responses:
        '200':
          description: 檔案刪除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 檔案刪除成功

        '500':
          description: 伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: 伺服器錯誤
                    
  /aodt/workflow/result/{task_id}:
    get:
      tags: [AODT]
      summary: 得到task_id對應的task的response
      parameters:
        - in: path
          name: task_id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 工作流程啟動成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '400':
          description: 工作流程啟動失敗或缺少必要參數
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'
        '404':
          description: 尚未完成流程或是沒有這個流程
          content:
            application/json:
              schema: 
                $ref: '#/components/schemas/TaskUnfinish'

        '500':
          description: 內部伺服器錯誤 
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AODTResponse'

  /aodt/restart:
    post:
      tags: [AODT]
      summary: 重新啟動 AODT 前端以及 restart 後端 containers
      
      responses:
        '200':
          description: AODT 開啟成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: AODT 開啟成功

        '500':
          description: 伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 伺服器錯誤
                  error:
                    type: string
                    example: 開啟失敗

  # RU 屬性管理 APIs
  /aodt/ru/update-properties:
    post:
      tags: [AODT]
      summary: 更新 RU 屬性
      description: |
        更新 RU 的屬性，包括高度、機械方位角和機械傾斜角。
        
        - 可以同時更新多個屬性，也可以只更新其中一個
        - 高度單位為公尺，範圍：0.5-100.0 米
        - 機械方位角範圍：0-360 度
        - 機械傾斜角範圍：0.0-360.0 度
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RUPropertiesUpdateRequest'
            examples:
              update_all:
                summary: 更新所有屬性
                value:
                  ru_path: "/RUs/ru_0001"
                  height: 30.0
                  mech_azimuth: 45.0
                  mech_tilt: 15.0
              update_height_only:
                summary: 只更新高度
                value:
                  ru_path: "/RUs/ru_0001"
                  height: 25.0
              update_angles:
                summary: 更新角度參數
                value:
                  ru_path: "/RUs/ru_0001"
                  mech_azimuth: 90.0
                  mech_tilt: 30.0
      responses:
        '200':
          description: RU 屬性更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RUPropertiesUpdateResponse'
        '400':
          description: 請求錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    enum:
                      - "請提供請求資料"
                      - "缺少必要參數: ru_path"
                      - "至少需要提供一個要更新的屬性 (height, mech_azimuth, mech_tilt)"
                      - "height 必須在 0.5-100.0 米範圍內"
                      - "mech_azimuth 必須在 0.0-360.0 度範圍內"
                      - "mech_tilt 必須在 0.0-360.0 度範圍內"
                    example: "缺少必要參數: ru_path"
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "內部錯誤: connection timeout"

  /aodt/ru/properties/{ru_path}:
    get:
      tags: [AODT]
      summary: 獲取 RU 屬性
      description: |
        獲取指定 RU 的當前屬性值，包括：
        
        - 高度 (height)
        - 機械方位角 (mech_azimuth)
        - 機械傾斜角 (mech_tilt)
        - Cell ID (cell_id)
        - DU ID (du_id)
      parameters:
        - in: path
          name: ru_path
          required: true
          schema:
            type: string
          description: RU 的完整路徑（可以包含或不包含前導斜線）
          example: "/RUs/ru_0001"
      responses:
        '200':
          description: 成功獲取 RU 屬性
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RUPropertiesResponse'
        '404':
          description: RU 不存在
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "獲取 RU 屬性失敗: /RUs/ru_0001"
        '500':
          description: 內部伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "內部錯誤: connection timeout"


  /netDT/{evaluation_id}:
    post:
      tags: [DT_AI_Model]
      summary: 傳送 heatmap 給 DT Model 計算 DT
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: DT request 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Network DT simulation start"
        '400':
          description: 上傳失敗或缺少參數
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: "Network DT simulation Error"

  /ranDT/{evaluation_id}:
    post:
      tags: [DT_AI_Model]
      summary: 傳送 heatmap 給 DT Model 計算 DT
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                ue_start_end_pt:
                  type: array
                  example: [[120.99703268059369, 24.78668801345445], [120.99701254813118, 24.787093779033228]]
      parameters:
        - in: path
          name: evaluation_id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: DT request 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Ran DT simulation start"
        '400':
          description: 上傳失敗或缺少參數
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: "Ran DT simulation Error"

  /gnb_status:
    get:
      tags: [GNB]
      summary: 取得所有 GNB 狀態（含座標）
      description: 從 GNB_STATUS_API_URL 取得 GNB 狀態與座標資訊
      responses:
        '200':
          description: 成功取得 GNB 狀態
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                      example: 1
                    lat:
                      type: number
                      nullable: true
                      example: 25.033
                    lon:
                      type: number
                      nullable: true
                      example: 121.565
        '500':
          description: GNB_STATUS_API_URL 未設定
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: GNB_STATUS_API_URL not set
        '502':
          description: 取得 GNB 狀態失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Failed to fetch GNB status