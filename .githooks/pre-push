#!/usr/bin/env bash
# Pre-push hook: Run type check before pushing
# To enable: git config core.hooksPath .githooks

set -e

FRONTEND_DIR="frontend"

# Check if node_modules exists
if [ ! -d "$FRONTEND_DIR/node_modules" ]; then
  echo "Warning: node_modules not found. Skipping type check."
  exit 0
fi

echo "Running TypeScript type check..."
cd "$FRONTEND_DIR"

# Run vue-tsc for type checking
if ! npx vue-tsc --noEmit 2>/dev/null; then
  echo ""
  echo "TypeScript errors found. Please fix them before pushing."
  exit 1
fi

echo "Type check passed."
exit 0
